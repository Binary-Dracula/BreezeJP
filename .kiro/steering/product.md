---
inclusion: always
---

---

# BreezeJP MVP 产品需求文档（规范版）

---

## 一、产品概述

BreezeJP 是一款追求极致「心流」体验的日语学习 App，核心聚焦 **单词（Word）、语法（Grammar）与五十音（Kana）** 三类基础学习对象。



产品通过：

* 全屏沉浸式交互（去任务化）
* 自由探索式学习路径
* 明确、可控的用户行为分支

解决传统背单词应用中常见的：

* 枯燥、被动
* 强任务感与强打断
* 学习路径不可控
* 学习与统计语义混乱

---

## 二、核心价值（用户可感知层）

* **沉浸感**：弱 UI、强内容，避免学习中断
* **清晰交互**：左右切换内容，上下查看信息，避免手势冲突
* **关联性**：通过语义关系引导自然扩展学习
* **掌控感**：所有学习推进均由用户显式行为触发
* **自由度**：无每日新词上限、无强制学习节奏
* **可解释性**：学习、复习、统计行为均有明确来源

> 注：算法与数据模型约束不在本节定义，详见 freeze.md

---

## 三、应用结构总览

* 无底部导航栏
* 单页 Dashboard 作为学习控制中心
* 所有学习 / 复习 / 统计入口统一汇聚于首页

Dashboard 的职责是 **调度与入口**，而非任务管理。

---

## 四、首页（Dashboard）

首页是 BreezeJP 的**学习调度中心**。

### 模块结构（固定）

1. Header（顶部区域）
2. Primary Actions（学习入口）
3. Review Section（复习入口）
4. Stats Card（统计展示）
5. Tools Grid（辅助功能）

> 所有模块结构固定，仅内容随用户状态变化。

---

### Tools Grid 详细说明

#### 1️⃣ 单词本（Vocabulary Book）

展示用户已学习和已掌握的单词，提供快速状态切换与回顾能力。

##### 入口

* 首页 Tools Grid「单词本」卡片
* 路由：`/vocabulary-book`

##### 页面结构

* **统计摘要**：展示学习中 / 已掌握的单词数量
* **TabBar 切换**：「学习中」与「已掌握」两个分页
* **搜索**：支持按单词、假名、释义搜索过滤
* **列表项**：单词、假名、释义、JLPT 等级、播放音频按钮、状态切换按钮

##### 用户操作

| 操作     | 当前状态 | 目标状态 | 含义             |
| -------- | -------- | -------- | ---------------- |
| 标记掌握 | learning | mastered | 确认已掌握该单词 |
| 恢复学习 | mastered | learning | 重新加入复习队列 |

##### 数据来源（只读）

```text
study_words
  INNER JOIN words
  LEFT JOIN word_meanings
  LEFT JOIN word_audio
WHERE
  user_id = current
  AND user_state IN (learning, mastered)
ORDER BY updated_at DESC
```

##### 写操作

* 状态变更复用 `WordCommand`（`markWordAsMastered` / `addWordToReview`）
* 不引入新的 Command

##### 约束

* 列表按 `updated_at` 降序排列
* 分页加载，每页 20 条
* 点击列表项可跳转到 `/learn/:wordId` 查看详情

---

## 五、Header（顶部区域）

展示内容：

* 时间段问候语
* 用户昵称（来自 `users`）
* 设置入口

### 约束

* Header **不依赖任何学习状态**
* 不使用统计数据
* 不做条件隐藏或分支渲染

---

## 六、Primary Actions（学习主入口）

始终可见，永不禁用。

---

### 1️⃣ 学习新单词（Learn New Words）

#### 行为特征（用户视角）

* 进入连续的单词浏览与探索流
* 无章节、无进度条、无任务提示
* 页面切换仅表示“内容曝光”

#### 产品级约束（冻结）

* 单词被展示 ≠ 用户已学习
* 展示行为 **不会产生学习统计**
* 展示行为 **不会自动进入复习**

---

### 2️⃣ 学习五十音（Learn Kana）

#### 行为特征（用户视角）

* 任意假名可自由进入学习
* 学习以「笔顺描红」为核心交互
* 不展示整体完成进度
* 不引导“全部学完”的目标感

> Kana 学习被设计为 **技能熟悉过程**，而非记忆任务。

---

### 3️⃣ 学习语法（Learn Grammar）

#### 行为特征（用户视角）

*   类似单词学习的探索流, 但是没有单词的岛的概念
*   展示接续、含义、典型例句
*   重点在于**理解构造**与**语感培养**

#### 产品级约束（冻结）

*   展示 ≠ 已学习
*   不产生学习统计

---

## 七、Review Section（复习入口）

复习是 BreezeJP 中**唯一明确的强学习入口**。

---

### 1️⃣ 复习单词（Review Words）

#### 数据来源（只读）

```text
study_words
WHERE
  user_id = current
  AND learning_status = learning
  AND next_review_at <= now
```

#### 行为特征

* 入口始终可点击
* 队列为空时展示提示文案
* Dashboard 不干预复习顺序或算法

---

### 2️⃣ 复习五十音（Review Kana）

> 是否存在该入口，取决于是否启用假名复习能力。

#### 数据来源（只读）

```text
kana_learning_state
WHERE
  user_id = current
  AND learning_status = learning
  AND next_review_at <= now
```

#### 说明

* Kana 复习不参与 Word 的学习统计
* 复习机制与 Word 完全独立

---

### 3️⃣ 复习语法（Review Grammar）

#### 数据来源（只读）

```text
study_grammars
WHERE
  user_id = current
  AND learning_status = learning
  AND next_review_at <= now
```

#### 说明

*   复用 FSRS 算法 (与 Word 类似)
*   拥有独立的复习队列，不与单词混杂

---

### 复习模块统一原则（冻结）

* 复习不压制学习入口
* Dashboard **仅展示数量**
* 不在 UI 层做任何派生或判断

---

## 八、Stats Card（学习统计）

Stats Card **仅用于展示结果**。

### 展示内容

* 今日学习（新学）
* 今日复习
* 累计掌握
* 连续学习天数
* 今日学习时长

### 数据来源（冻结）

* **全部来自 `daily_stats`**
* UI 不参与任何统计推导
* 不从学习状态或 Session 计算

---

## 九、Word 学习体验说明（用户可见层）

### 学习状态（展示语义）

| 状态     | 用户感知含义         |
| -------- | -------------------- |
| seen     | 看过，但尚未决定学习 |
| learning | 已加入复习           |
| mastered | 已完成学习           |
| ignored  | 明确不学             |

### 用户操作反馈

* 「加入复习」：表示承诺学习
* 「已掌握」：表示无需继续复习
* 「忽略」：表示当前不想学习
* 「恢复学习」：重新回到未承诺状态

> 状态背后的数据与统计规则，不在本节定义。

---

## 十、Kana 学习体验说明（用户可见层）

### 学习流程

1. 用户进入某个假名的学习页面
2. 观看或跳过笔顺动画
3. 完成一次 **完整描红**
4. 系统记录该假名已进入学习状态
5. 用户可通过「已掌握」按钮切换状态

### 交互反馈

* 完成描红后显示完成提示
* 已掌握状态下按钮样式变化
* 再次点击可恢复为学习中

### 明确不展示的内容

* 不显示「第几个假名」
* 不显示完成百分比
* 不显示学习统计数字

---

## 十一、记忆算法（仅说明，不裁决）

* 默认算法：SM-2
* 可选算法：FSRS
* 算法细节与字段定义以技术文档为准

---

## 十二、UI / UX 通用规范

* 左右滑动切换内容
* 关键行为触发轻量震动反馈
* Session 内反馈仅用于即时提示
* 所有文案必须来自 `AppLocalizations`

---

## 十三、产品文档冻结声明

> **本产品文档描述的是“用户可感知的行为与体验”，
> 不承担架构裁决职责。**

* 若实现行为与本文档不符 → 视为产品 Bug
* 若需调整用户体验 → 需先修改本文档
* 若涉及数据 / 统计 / 状态语义 → 以 freeze.md 为唯一裁决依据

**本文件自 MVP 起冻结。**

---